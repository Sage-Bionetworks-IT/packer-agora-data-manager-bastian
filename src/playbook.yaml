- name: Main
  hosts: all
  become: true

  tasks:
    - name: Add Mongo DB repository
      ansible.builtin.yum_repository:
        name: mongodb
        description: MongoDB repo
        baseurl: https://repo.mongodb.org/yum/amazon/2023/mongodb-org/8.0/x86_64/
        gpgcheck: true
        gpgkey: https://pgp.mongodb.com/server-8.0.asc

    - name: Add Microsoft repository
      ansible.builtin.yum_repository:
        name: microsoft
        description: Microsoft repo
        baseurl: https://packages.microsoft.com/config/centos/8/packages-microsoft-prod
        gpgcheck: true

    - name: Install packages
      ansible.builtin.dnf:
        state: present
        update_cache: true
        pkg:
          - python
          - python-pip
          - mongodb-mongosh-shared-openssl3
          - mongodb-database-tools
          - dotnet-sdk-8.0

    - name: Install python packages
      ansible.builtin.pip:
        name:
          - synapseclient
